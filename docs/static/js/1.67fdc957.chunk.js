(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{155:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return s}));var i=a(36),n=a.n(i),o=n.a.CancelToken.source();function r(e){return void 0===e&&(e={}),n.a.get("/v2/movie/in_theaters",{params:e})}function c(e){return void 0===e&&(e={}),n.a.get("/v2/movie/coming_soon",{params:e})}function m(e){return void 0===e&&(e={}),n.a.get("/v2/movie/top250",{params:e})}function s(e){var t=void 0===e?{}:e,a=t.id,i=void 0===a?"":a,r=t.cancelToken,c=void 0===r?o.token:r;return n.a.get("/v2/movie/subject/"+i,{cancelToken:c})}},156:function(e,t,a){"use strict";var i=a(4),n=a(0),o=a(157),r=a.n(o),c=n.useState;t.a=function(e){var t=e.readonly,a=void 0!==t&&t,o=e.score,m=(Object(i.e)(e,["readonly","score"]),c(o||0)),s=m[0],l=m[1];return n.createElement("section",{className:r.a["m-star"]},a?n.createElement("div",{className:r.a["star-wrappwer"]},n.createElement("div",{className:r.a["star-score"],style:{width:Number(o)/10*100+"%"}},n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"})),n.createElement("div",{className:r.a["star-bg"]},n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}),n.createElement("i",{className:"iconfont icon-changyongtubiao-mianxing-11"}))):n.createElement("div",{className:r.a["star-bg"]},[0,1,2,3,4].map((function(e){return n.createElement("i",{key:e,onClick:function(){return l(e+1)},className:"iconfont icon-changyongtubiao-mianxing-11 "+(s>=e+1?r.a["star-active"]:"")})}))))}},157:function(e,t,a){var i=a(158);"string"==typeof i&&(i=[[e.i,i,""]]);a(80)(i,{hmr:!0,transform:void 0}),i.locals&&(e.exports=i.locals)},158:function(e,t,a){(t=e.exports=a(79)(void 0)).push([e.i,".m-star__12tOHL{position:relative;display:inline-block}.m-star__12tOHL .star-wrappwer__3L7oFC{position:relative;display:inline-block;vertical-align:middle;letter-spacing:0}.m-star__12tOHL .star-wrappwer__3L7oFC .star-score__36Ya4J{position:absolute;left:0;top:0;color:orange;overflow:hidden}.m-star__12tOHL .star-wrappwer__3L7oFC .score__d--UZk{margin-left:4px;vertical-align:middle}.m-star__12tOHL .star-score__36Ya4J i,.m-star__12tOHL .star-bg__225AWC i{margin-left:-0.5px}.m-star__12tOHL .star-bg__225AWC{color:#ddd}.m-star__12tOHL .star-active__1l6jeE{color:orange}\n",""]),t.locals={"m-star":"m-star__12tOHL","star-wrappwer":"star-wrappwer__3L7oFC","star-score":"star-score__36Ya4J",score:"score__d--UZk","star-bg":"star-bg__225AWC","star-active":"star-active__1l6jeE"}},181:function(e,t,a){var i=a(182);"string"==typeof i&&(i=[[e.i,i,""]]);a(80)(i,{hmr:!0,transform:void 0}),i.locals&&(e.exports=i.locals)},182:function(e,t,a){(t=e.exports=a(79)(void 0)).push([e.i,".movie-detail__HCdfNa{width:100%;height:100%}.desc{color:#ccc;font-size:12px}.movie-header__1pN4zC{position:relative;padding-top:20px;padding-bottom:20px;color:#fff;background:#7f6f5b}.movie-top__8Yu0Yx{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}.movie-top__8Yu0Yx .movie-img__74s9K7{-ms-flex:120px 0;flex:120px 0;-ms-flex-negative:0;flex-shrink:0;height:160px;position:relative;margin-right:10px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;overflow:hidden}.movie-top__8Yu0Yx .movie-img__74s9K7 .img__28KxEi{width:100%}.movie-top__8Yu0Yx .movie-top-content__3THX-V{width:100%}.movie-top__8Yu0Yx .movie-top-content__3THX-V .movie-title__2vT-2y{font-size:22px}.movie-score__oBwCjp{margin-top:10px;padding:14px;border-radius:6px;font-size:12px;background:rgba(0,0,0,0.1)}.movie-score__oBwCjp .score-wrapper__1SHwNP{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.movie-score__oBwCjp .score__1Gnevk{margin-right:10px;font-size:36px}.block-title__1uHetr{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;margin-bottom:10px;font-size:16px;color:#999}.block-title__1uHetr .desc__16yNUh{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.scroll-x__1adgU-{white-space:nowrap;overflow:auto hidden}.movie-info__2ejLMx .more__321uZk{float:right;color:#42bd56;cursor:pointer}.movie-actor__2nydwh .actor-item__K08ILr{display:inline-block;margin-right:10px;text-align:center}.movie-actor__2nydwh .actor-item__K08ILr img{width:96px;height:128px;border-radius:4px;background:#eee}.movie-actor__2nydwh .actor-item__K08ILr .actor-name__vLmdKf{margin:4px 0;font-size:12px}.movie-pic-item__2tZ00r{display:inline-block}.movie-pic-item__2tZ00r img{width:160px;height:120px;margin-right:6px;border-radius:4px;background:#eee}.comment-item__2VpUae{padding-bottom:10px;margin-bottom:10px;border-bottom:1px solid #eee}.comment-item__2VpUae .comment-title__2xYzbl{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-bottom:10px}.comment-item__2VpUae .comment-title__2xYzbl>span{margin-right:6px}.comment-item__2VpUae .comment-title__2xYzbl>img{width:20px;height:20px;margin-right:6px;border-radius:20px;background:#eee}.comment-item__2VpUae .comment-content__3IO4Dk{word-break:break-word}\n",""]),t.locals={"movie-detail":"movie-detail__HCdfNa","movie-header":"movie-header__1pN4zC","movie-top":"movie-top__8Yu0Yx","movie-img":"movie-img__74s9K7",img:"img__28KxEi","movie-top-content":"movie-top-content__3THX-V","movie-title":"movie-title__2vT-2y","movie-score":"movie-score__oBwCjp","score-wrapper":"score-wrapper__1SHwNP",score:"score__1Gnevk","block-title":"block-title__1uHetr",desc:"desc__16yNUh","scroll-x":"scroll-x__1adgU-","movie-info":"movie-info__2ejLMx",more:"more__321uZk","movie-actor":"movie-actor__2nydwh","actor-item":"actor-item__K08ILr","actor-name":"actor-name__vLmdKf","movie-pic-item":"movie-pic-item__2tZ00r","comment-item":"comment-item__2VpUae","comment-title":"comment-title__2xYzbl","comment-content":"comment-content__3IO4Dk"}},187:function(e,t,a){"use strict";a.r(t);var i=a(4),n=a(0),o=a(155),r=a(156),c=a(181),m=a.n(c),s={isLoading:!1,movieInfo:{id:"",images:{medium:""},title:"",original_title:"",summary:"",countries:[],genres:[],pubdates:[],durations:[],rating:{average:""},ratings_count:"",directors:[{name:"",avatars:{medium:""}}],casts:[{name:"",avatars:{medium:""}}],photos:[{image:""}],popular_reviews:[{summary:"",author:{avatar:"",name:""},rating:{value:0}}]},showDescFull:!1},l=function(e){function t(t){var a=e.call(this,t)||this;return a.state=s,a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this._getMovieDetail(this.props.match.params.id)},t.prototype.componentWillUnmount=function(){this.setState=function(){}},t.prototype._getMovieDetail=function(e){var t=this;this.state.isLoading||(this.setState({isLoading:!0}),Object(o.b)({id:e}).then((function(e){t.setState({movieInfo:e,isLoading:!1})})).catch((function(e){t.setState({isLoading:!1}),alert("请求失败，请稍后再试！")})))},t.prototype.getDesc60Words=function(e){return e.substr(0,60)+"..."},t.prototype.render=function(){var e=this,t=this.state,a=t.isLoading,i=t.movieInfo,o=t.showDescFull;return n.createElement("div",{className:""+m.a["movie-detail"]},n.createElement("section",{className:m.a["movie-header"]+" center-content"},n.createElement("div",{className:m.a["movie-top"]},n.createElement("div",{className:m.a["movie-img"]+" "+(a&&"loading-shink")},a?n.createElement("div",{className:m.a.img}):n.createElement("img",{className:m.a.img,src:i.images.medium,alt:"loading"})),n.createElement("div",{className:m.a["movie-top-content"]},n.createElement("div",{className:m.a["movie-title"]+" "+(a&&"loading-shink")},i.title||"..."),n.createElement("div",{className:""+(a&&"loading-shink")},i.original_title),n.createElement("div",{className:"desc "+(a&&"loading-shink"),style:{margin:"6px 0 12px"}},i.countries.toString()," / ",i.genres.toString()," / ",i.pubdates.toString()," / 片长",i.durations[0]))),n.createElement("div",{className:m.a["movie-score"]},n.createElement("div",null,"豆瓣评分 TM"),n.createElement("div",{className:m.a["score-wrapper"]},n.createElement("span",{className:m.a.score},i.rating.average||"0.0"),n.createElement("div",null,n.createElement(r.a,{score:i.rating.average,readonly:!0}),n.createElement("div",{className:"desc"},i.ratings_count,"人评价"))))),n.createElement("section",{className:m.a["movie-info"]+" center-content"},n.createElement("div",{className:m.a["block-title"]},"剧情简介"),n.createElement("span",null,o?i.summary:this.getDesc60Words(i.summary)),!a&&!o&&n.createElement("span",{className:m.a.more,onClick:function(){return e.setState({showDescFull:!0})}},"展开")),n.createElement("section",{className:m.a["movie-actor"]+" center-content"},n.createElement("div",{className:m.a["block-title"]},"演职员"),n.createElement("div",{className:m.a["scroll-x"],style:{display:a?"none":""}},i.directors.map((function(e){return n.createElement("div",{className:m.a["actor-item"],key:e.avatars.medium},n.createElement("img",{src:e.avatars.medium}),n.createElement("div",{className:m.a["actor-name"]},e.name),n.createElement("span",{className:"desc"},"导演"))})),i.casts.map((function(e){return n.createElement("div",{className:m.a["actor-item"],key:e.avatars.medium},n.createElement("img",{src:e.avatars.medium,alt:"loading"}),n.createElement("div",{className:m.a["actor-name"]},e.name),n.createElement("span",{className:"desc"},"演员"))})))),n.createElement("section",{className:"movie-pic center-content"},n.createElement("div",{className:m.a["block-title"]},"预告片 / 剧照"),n.createElement("div",{className:m.a["scroll-x"],style:{display:a?"none":""}},i.photos.map((function(e){return n.createElement("div",{className:m.a["movie-pic-item"],key:e.image},n.createElement("img",{src:e.image,alt:"loading"}))})))),n.createElement("section",{className:"movie-comment center-content"},n.createElement("div",{className:m.a["block-title"]},"影评"),n.createElement("div",{style:{display:a?"none":""}},i.popular_reviews.map((function(e,t){return n.createElement("div",{className:m.a["comment-item"],key:t},n.createElement("div",{className:m.a["comment-title"]+" desc"},n.createElement("img",{src:e.author.avatar,alt:"loading"}),n.createElement("span",null,e.author.name),n.createElement(r.a,{score:""+2*e.rating.value,readonly:!0})),n.createElement("div",{className:m.a["comment-content"]},e.summary))})))))},t}(n.Component);t.default=l}}]);