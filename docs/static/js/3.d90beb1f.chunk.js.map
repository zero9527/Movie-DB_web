{"version":3,"sources":["api/movie.ts","components/star/index.tsx","webpack:///./src/components/star/star.scss?f4b1","components/star/star.scss","webpack:///./src/views/movie-detail/movie-detail.scss?ad19","views/movie-detail/movie-detail.scss","utils/useFetchData.tsx","views/movie-detail/index.tsx"],"names":["__webpack_require__","d","__webpack_exports__","getMovieLine","getMovieComing","getMovieTop250","getMovieDetail","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","params","a","get","_a","_b","id","useState","react__WEBPACK_IMPORTED_MODULE_1__","readonly","score","_c","Object","tslib__WEBPACK_IMPORTED_MODULE_0__","scrore1","setScore1","className","_star_scss__WEBPACK_IMPORTED_MODULE_2___default","style","width","Number","map","item","key","onClick","content","module","i","options","hmr","transform","locals","exports","push","m-star","star-wrappwer","star-score","star-bg","star-active","movie-detail","movie-header","movie-top","movie-img","img","movie-top-content","movie-title","movie-score","score-wrapper","block-title","desc","scroll-x","movie-info","more","movie-actor","actor-item","actor-name","no-img","movie-pic-item","comment-item","comment-title","comment-content","useEffect","external_React_","useFetchData","fetchFn","isLoading","setIsLoading","isError","setIsError","resData","setResData","isDestroyed","tslib_es6","res","sent","movie_detail_useState","movie_detail_useEffect","initialMovieInfo","images","medium","title","original_title","summary","countries","genres","pubdates","durations","rating","average","ratings_count","directors","name","avatars","casts","photos","image","popular_reviews","author","avatar","value","showDescFull","setShowDescFull","movieInfo","setMovieInfo","react_router","movie","toast_default","fail","movie_detail_default","src","alt","margin","toString","star","height","display","index"],"mappings":"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","file":"static/js/3.d90beb1f.chunk.js","sourcesContent":["import axios from 'axios';\n\n// 跨域用不了，用jsonp\nexport function getMovieLine(params = {}) {\n  return axios.get('/v2/movie/in_theaters', {params});\n}\n\nexport function getMovieComing(params = {}) {\n  return axios.get('/v2/movie/coming_soon', {params});\n}\n\nexport function getMovieTop250(params = {}) {\n  return axios.get('/v2/movie/top250', {params});\n}\n\nexport function getMovieDetail({ id = '' } = {}) {\n  return axios.get('/v2/movie/subject/'+id);\n}\n","import * as React from 'react';\nimport styles from './star.scss';\n\nconst { useState } = React;\n\nexport interface StarProps {\n  readonly?: boolean,\n  score?: string\n}\n\n/**\n * Star 评分\n * @param {*} readonly 只读：显示评分 \n * @param {*} score 评分：如'8.2' \n */\nfunction Star({\n  readonly = false,\n  score,\n  ...props\n}: StarProps) {\n  const starLen = [0, 1, 2, 3, 4];\n  const [scrore1, setScore1] = useState(score || 0);\n\n  return (\n    <section className={styles[\"m-star\"]}>\n      {readonly ? (\n        <div className={styles[\"star-wrappwer\"]}>\n          {/* 显示评分 */}\n          <div className={styles[\"star-score\"]} style={{width: (Number(score)!/10)*100+'%'}}>\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n          </div>\n          <div className={styles[\"star-bg\"]}>\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n            <i className=\"iconfont icon-changyongtubiao-mianxing-11\" />\n          </div>\n        </div>\n      ) : (\n        <div className={styles[\"star-bg\"]}>\n          {starLen.map(item => (\n            <i \n              key={item}\n              onClick={() => setScore1(item+1)}\n              className={`iconfont icon-changyongtubiao-mianxing-11 ${\n                scrore1 >= item+1 ? styles['star-active'] : ''\n              }`}\n            />\n          ))}\n        </div>\n      )}\n    </section>\n  );\n}\n\nexport default Star;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--5-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--5-oneOf-4-4!./star.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--5-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--5-oneOf-4-4!./star.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--5-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--5-oneOf-4-4!./star.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".m-star__12tOHL{position:relative;display:inline-block}.m-star__12tOHL .star-wrappwer__3L7oFC{position:relative;display:inline-block;vertical-align:middle;letter-spacing:0}.m-star__12tOHL .star-wrappwer__3L7oFC .star-score__36Ya4J{position:absolute;left:0;top:0;color:orange;overflow:hidden}.m-star__12tOHL .star-wrappwer__3L7oFC .score__d--UZk{margin-left:4px;vertical-align:middle}.m-star__12tOHL .star-score__36Ya4J i,.m-star__12tOHL .star-bg__225AWC i{margin-left:-0.5px}.m-star__12tOHL .star-bg__225AWC{color:#ddd}.m-star__12tOHL .star-active__1l6jeE{color:orange}\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"m-star\": \"m-star__12tOHL\",\n\t\"star-wrappwer\": \"star-wrappwer__3L7oFC\",\n\t\"star-score\": \"star-score__36Ya4J\",\n\t\"score\": \"score__d--UZk\",\n\t\"star-bg\": \"star-bg__225AWC\",\n\t\"star-active\": \"star-active__1l6jeE\"\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--5-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--5-oneOf-4-4!./movie-detail.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--5-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--5-oneOf-4-4!./movie-detail.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--5-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--5-oneOf-4-4!./movie-detail.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".movie-detail__HCdfNa{width:100%;height:100%}.desc{color:#ccc;font-size:12px}.movie-header__1pN4zC{position:relative;padding-top:20px;padding-bottom:20px;color:#fff;background:#7f6f5b}.movie-top__8Yu0Yx{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}.movie-top__8Yu0Yx .movie-img__74s9K7{-ms-flex:120px 0;flex:120px 0;-ms-flex-negative:0;flex-shrink:0;height:160px;position:relative;margin-right:10px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;overflow:hidden}.movie-top__8Yu0Yx .movie-img__74s9K7 .img__28KxEi{width:100%}.movie-top__8Yu0Yx .movie-top-content__3THX-V{width:100%}.movie-top__8Yu0Yx .movie-top-content__3THX-V .movie-title__2vT-2y{font-size:22px}.movie-score__oBwCjp{margin-top:10px;padding:14px;border-radius:6px;font-size:12px;background:rgba(0,0,0,0.1)}.movie-score__oBwCjp .score-wrapper__1SHwNP{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.movie-score__oBwCjp .score__1Gnevk{margin-right:10px;font-size:36px}.block-title__1uHetr{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;margin-bottom:10px;font-size:16px;color:#999}.block-title__1uHetr .desc__16yNUh{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.scroll-x__1adgU-{white-space:nowrap;overflow:auto hidden}.movie-info__2ejLMx .content__2onC6Y{height:60px;line-height:20px;display:inline-block;overflow:hidden}.movie-info__2ejLMx .more__321uZk{position:absolute;bottom:14px;right:15px;padding:2px 5px;color:#42bd56;background-color:#fff;cursor:pointer}.movie-info__2ejLMx .more__321uZk::after{content:'';position:absolute;top:0;left:0;margin-left:-60px;width:60px;height:20px;display:block;background:-webkit-gradient(linear, left top, right top, from(transparent), to(#fff));background:-webkit-linear-gradient(left, transparent, #fff);background:-o-linear-gradient(left, transparent, #fff);background:linear-gradient(90deg, transparent, #fff)}.movie-actor__2nydwh .actor-item__K08ILr{position:relative;display:inline-block;margin-right:10px;text-align:center}.movie-actor__2nydwh .actor-item__K08ILr img{width:96px;height:128px;border-radius:4px;background:#eee}.movie-actor__2nydwh .actor-item__K08ILr .actor-name__vLmdKf{margin:4px 0;font-size:12px}.movie-actor__2nydwh .actor-item__K08ILr .no-img__2A9dqU{width:96px;height:128px;line-height:128px;position:absolute;top:0;left:0;font-size:10px;text-align:center;color:#ccc;background-color:#f6f6f6}.movie-pic-item__2tZ00r{display:inline-block}.movie-pic-item__2tZ00r img{width:160px;height:120px;margin-right:6px;border-radius:4px;background:#eee}.comment-item__2VpUae{padding-bottom:10px;margin-bottom:10px;border-bottom:1px solid #eee}.comment-item__2VpUae .comment-title__2xYzbl{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-bottom:10px}.comment-item__2VpUae .comment-title__2xYzbl>span{margin-right:6px}.comment-item__2VpUae .comment-title__2xYzbl>img{width:20px;height:20px;margin-right:6px;border-radius:20px;background:#eee}.comment-item__2VpUae .comment-content__3IO4Dk{word-break:break-word}\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"movie-detail\": \"movie-detail__HCdfNa\",\n\t\"movie-header\": \"movie-header__1pN4zC\",\n\t\"movie-top\": \"movie-top__8Yu0Yx\",\n\t\"movie-img\": \"movie-img__74s9K7\",\n\t\"img\": \"img__28KxEi\",\n\t\"movie-top-content\": \"movie-top-content__3THX-V\",\n\t\"movie-title\": \"movie-title__2vT-2y\",\n\t\"movie-score\": \"movie-score__oBwCjp\",\n\t\"score-wrapper\": \"score-wrapper__1SHwNP\",\n\t\"score\": \"score__1Gnevk\",\n\t\"block-title\": \"block-title__1uHetr\",\n\t\"desc\": \"desc__16yNUh\",\n\t\"scroll-x\": \"scroll-x__1adgU-\",\n\t\"movie-info\": \"movie-info__2ejLMx\",\n\t\"content\": \"content__2onC6Y\",\n\t\"more\": \"more__321uZk\",\n\t\"movie-actor\": \"movie-actor__2nydwh\",\n\t\"actor-item\": \"actor-item__K08ILr\",\n\t\"actor-name\": \"actor-name__vLmdKf\",\n\t\"no-img\": \"no-img__2A9dqU\",\n\t\"movie-pic-item\": \"movie-pic-item__2tZ00r\",\n\t\"comment-item\": \"comment-item__2VpUae\",\n\t\"comment-title\": \"comment-title__2xYzbl\",\n\t\"comment-content\": \"comment-content__3IO4Dk\"\n};","import * as React from 'react';\nimport { AxiosResponse } from 'axios';\n\nconst {useEffect, useState} = React;\n\ntype Props = Promise<AxiosResponse<any>>;\n\n/**\n * 请求数据函数的封装\n * @param fetchFn 封装好的 axios 请求函数，看 src/api\n */\nconst UseFetchData = (fetchFn: Props) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [isError, setIsError] = useState<boolean>(false);\n  const [resData, setResData] = useState<any>();\n\n  useEffect(() => {\n    let isDestroyed = false;\n\n    const getData = async () => {\n      setIsLoading(true);\n      try {\n        const res = await fetchFn;\n        if (!isDestroyed) {\n          setIsLoading(false);\n          setResData(res);\n        }\n      } catch(err) {\n        setIsError(true);\n      }\n    };\n\n    getData();\n\n    return () => {\n      isDestroyed = true;\n    };\n  }, []);\n\n  return {\n    isLoading,\n    isError,\n    resData\n  };\n};\n\nexport default UseFetchData;\n","import * as React from 'react';\nimport UseFetchData from '@/utils/useFetchData';\nimport { useParams } from 'react-router';\nimport { getMovieDetail } from '@/api/movie';\nimport Star from '@/components/star';\nimport styles from './movie-detail.scss';\nimport { Toast } from 'antd-mobile';\n\nconst { useState, useEffect } = React;\n\ninterface Params {\n  id: string;\n  [props: string]: any;\n}\n\nconst initialMovieInfo = {\n  id: '',\n  images: { medium: '' },\n  title: '',\n  original_title: '',\n  summary: '',\n  countries: [],\n  genres: [],\n  pubdates: [],\n  durations: [],\n  rating: { average: '' },\n  ratings_count: '',\n  directors: [{ name: '', avatars: { medium: '' } }],\n  casts: [{ name: '', avatars: { medium: '' } }],\n  photos: [{ image: '' }],\n  popular_reviews: [\n    { summary: '', author: { avatar: '', name: '' }, rating: { value: 0 } }\n  ]\n};\n\n/**\n * 电影详情页\n */\nconst MovieDetail: React.FC = () => {\n  const [showDescFull, setShowDescFull] = useState(false);\n  const [movieInfo, setMovieInfo] = useState(initialMovieInfo);\n  const params = useParams<Params>();\n  const { isLoading, isError, resData } = UseFetchData(\n    getMovieDetail({ id: params.id })\n  );\n\n  useEffect(() => {\n    if (resData) setMovieInfo(resData);\n  }, [resData]);\n\n  useEffect(() => {\n    if (isError) Toast.fail('出错了，请稍后再试！');\n  }, [isError]);\n\n  return (\n    <div className={`${styles['movie-detail']}`}>\n      <section className={`${styles['movie-header']} center-content`}>\n        <div className={styles['movie-top']}>\n          <div\n            className={`${styles['movie-img']} ${isLoading && 'loading-shink'}`}\n          >\n            {isLoading ? (\n              <div className={styles.img} />\n            ) : (\n              <img\n                className={styles.img}\n                src={movieInfo.images.medium}\n                alt=\"loading\"\n              />\n            )}\n          </div>\n          <div className={styles['movie-top-content']}>\n            <div\n              className={`${styles['movie-title']} ${isLoading &&\n                'loading-shink'}`}\n            >\n              {movieInfo.title || '...'}\n            </div>\n            <div className={`${isLoading && 'loading-shink'}`}>\n              {movieInfo.original_title}\n            </div>\n            <div\n              className={`desc ${isLoading && 'loading-shink'}`}\n              style={{ margin: '6px 0 12px' }}\n            >\n              {movieInfo.countries.toString()}&nbsp;/&nbsp;\n              {movieInfo.genres.toString()}&nbsp;/&nbsp;\n              {movieInfo.pubdates.toString()}&nbsp;/ 片长\n              {movieInfo.durations[0]}\n            </div>\n          </div>\n        </div>\n        <div className={styles['movie-score']}>\n          <div>豆瓣评分 TM</div>\n          <div className={styles['score-wrapper']}>\n            <span className={styles.score}>\n              {movieInfo.rating.average || '0.0'}\n            </span>\n            <div>\n              <Star score={movieInfo.rating.average} readonly={true} />\n              <div className=\"desc\">{movieInfo.ratings_count}人评价</div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className={`${styles['movie-info']} center-content`}>\n        <div className={styles['block-title']}>剧情简介</div>\n        <div\n          className={styles.content}\n          style={{ height: showDescFull ? 'auto' : '60px' }}\n        >\n          {movieInfo.summary}\n        </div>\n        {!isLoading && !showDescFull && (\n          <span className={styles.more} onClick={() => setShowDescFull(true)}>\n            展开\n          </span>\n        )}\n      </section>\n\n      <section className={`${styles['movie-actor']} center-content`}>\n        <div className={styles['block-title']}>演职员</div>\n        <div\n          className={styles['scroll-x']}\n          style={{ display: isLoading ? 'none' : '' }}\n        >\n          {movieInfo.directors.map((item: any, index: number) => (\n            <div className={styles['actor-item']} key={index}>\n              <img src={item.avatars ? item.avatars.medium : ''} />\n              {!item.avatars && (\n                <span className={styles['no-img']}>没有图片</span>\n              )}\n              <div className={styles['actor-name']}>{item.name}</div>\n              <span className=\"desc\">导演</span>\n            </div>\n          ))}\n          {movieInfo.casts.map((item: any, index: number) => (\n            <div className={styles['actor-item']} key={index}>\n              <img src={item.avatars ? item.avatars.medium : ''} />\n              {!item.avatars && (\n                <span className={styles['no-img']}>没有图片</span>\n              )}\n              <div className={styles['actor-name']}>{item.name}</div>\n              <span className=\"desc\">演员</span>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      <section className={`movie-pic center-content`}>\n        <div className={styles['block-title']}>预告片 / 剧照</div>\n        <div\n          className={styles['scroll-x']}\n          style={{ display: isLoading ? 'none' : '' }}\n        >\n          {movieInfo.photos.map((item: any) => (\n            <div className={styles['movie-pic-item']} key={item.image}>\n              <img src={item.image} alt=\"loading\" />\n            </div>\n          ))}\n        </div>\n      </section>\n\n      <section className={`movie-comment center-content`}>\n        <div className={styles['block-title']}>影评</div>\n        <div style={{ display: isLoading ? 'none' : '' }}>\n          {movieInfo.popular_reviews.map((item: any, index: number) => (\n            <div className={styles['comment-item']} key={index}>\n              <div className={`${styles['comment-title']} desc`}>\n                <img src={item.author.avatar} alt=\"loading\" />\n                <span>{item.author.name}</span>\n                <Star score={`${item.rating.value * 2}`} readonly={true} />\n              </div>\n              <div className={styles['comment-content']}>{item.summary}</div>\n            </div>\n          ))}\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default MovieDetail;\n"],"sourceRoot":""}